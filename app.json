{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "de.jnkconsulting.e3dc.v2",
  "version": "1.0.2",
  "compatibility": ">=5.0.0",
  "sdk": 3,
  "brandColor": "#7AB31B",
  "platforms": [
    "local"
  ],
  "name": {
    "en": "E3DC - HPS",
    "de": "E3DC - HKW"
  },
  "description": {
    "en": "Manage your solar power",
    "de": "Verwalte deinen Solarstrom"
  },
  "category": [
    "energy"
  ],
  "permissions": [],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "Jochen Zink"
  },
  "bugs": {
    "url": "https://github.com/jnk-cons/e3dc-4-homey/issues"
  },
  "tags": {
    "en": [
      "E3DC",
      "solar panel",
      "RSCP",
      "Home power station",
      "Wallbox"
    ],
    "de": [
      "E3DC",
      "solar panel",
      "RSCP",
      "Hauskraftwerk",
      "Wallbox"
    ]
  },
  "source": "https://github.com/jnk-cons/e3dc-4-homey",
  "support": "mailto:jochen.zink@jnk-consulting.de",
  "homepage": "https://jnk-cons.github.io/e3dc-4-homey/",
  "homeyCommunityTopicId": 105168,
  "contributing": {
    "donate": {
      "paypal": {
        "username": "jochenzink84"
      }
    }
  },
  "drivers": [
    {
      "name": {
        "en": "Battery monitor",
        "de": "Batteriemonitor"
      },
      "class": "other",
      "capabilities": [
        "device_name",
        "measure_dcbcount",
        "measure_battery",
        "measure_capacity",
        "measure_voltage",
        "measure_temperature",
        "measure_temperature_max",
        "measure_temperature_min",
        "measure_max_charging_power",
        "measure_max_discharging_power",
        "measure_emergency_power_reserve"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/battery-module/assets/images/small.png",
        "large": "/drivers/battery-module/assets/images/large.png",
        "xlarge": "/drivers/battery-module/assets/images/xlarge.png"
      },
      "energy": {
        "batteries": [
          "INTERNAL"
        ]
      },
      "pair": [
        {
          "id": "list_my_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          },
          "options": {
            "singular": true
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "id": "battery-module"
    },
    {
      "name": {
        "en": "HPS",
        "de": "HKW"
      },
      "class": "solarpanel",
      "capabilities": [
        "measure_pv_delivery",
        "measure_grid_delivery",
        "measure_battery_delivery",
        "measure_house_consumption",
        "measure_battery",
        "firmware_version",
        "charge_time"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/home-power-station/assets/images/small.png",
        "large": "/drivers/home-power-station/assets/images/large.png",
        "xlarge": "/drivers/home-power-station/assets/images/xlarge.png"
      },
      "energy": {
        "batteries": [
          "INTERNAL"
        ]
      },
      "pair": [
        {
          "id": "connect",
          "navigation": {
            "next": "list_my_devices"
          }
        },
        {
          "id": "list_my_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices",
            "prev": "connect"
          },
          "options": {
            "singular": true
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "id": "home-power-station",
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Connection data",
            "de": "Verbindungsdaten"
          },
          "children": [
            {
              "id": "portalUsername",
              "type": "text",
              "label": {
                "en": "Portal username",
                "de": "Portal Benutzer"
              },
              "value": "",
              "hint": {
                "en": "Username of your E3DC portal user",
                "de": "Benutzername deines E3DC Portal Users"
              }
            },
            {
              "id": "portalPassword",
              "type": "password",
              "label": {
                "en": "Portal password",
                "de": "Portal Passwort"
              },
              "value": "",
              "hint": {
                "en": "Password to the E3DC portal",
                "de": "Passwort zum E3DC Portal"
              }
            },
            {
              "id": "rscpKey",
              "type": "password",
              "label": {
                "en": "RSCP Passwort",
                "de": "RSCP password"
              },
              "value": "",
              "hint": {
                "en": "Password of the RSCP connection as entered on the home power station",
                "de": "Passwort der RSCP Verbindung, wie es am Hauskraftwerk eingetragen wurde"
              }
            },
            {
              "id": "stationAddress",
              "type": "text",
              "label": {
                "en": "IP",
                "de": "IP"
              },
              "value": "",
              "hint": {
                "en": "IP address of the home power station",
                "de": "IP Adresse des Hauskraftwerks"
              }
            },
            {
              "id": "stationPort",
              "type": "number",
              "label": {
                "en": "Port",
                "de": "Port"
              },
              "value": 5022,
              "min": 0,
              "max": 65535,
              "hint": {
                "en": "Port of the home power station (should be 5033, or 5034 for farming)",
                "de": "Port des Hauskraftwerks (Sollte 5033 sein, bzw. 5034 für Farming)"
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Battery information",
            "de": "Batteriedaten"
          },
          "children": [
            {
              "id": "rscpCapacity",
              "type": "label",
              "label": {
                "en": "Capacity according to home power station (Wh)",
                "de": "Kapazität laut Hauskraftwerk (Wh)"
              },
              "value": "0",
              "hint": {
                "en": "Contains the battery capacity as supplied by the home power station via the interface.",
                "de": "Enthält die Batteriekapazität, wie sie vom Hauskraftwerk über die Schnittstelle geliefert wird."
              }
            },
            {
              "id": "shouldCapacityOverwritten",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Use your own capacity value?",
                "de": "Eigenen Kapazitätswert verwenden?"
              },
              "hint": {
                "en": "If the switch is selected, the self-specified battery capacity is used.",
                "de": "Wenn der Schalter gewählt ist, wird die selbst angegebene Batteriekapazität verwendet."
              }
            },
            {
              "id": "customCapacity",
              "type": "number",
              "label": {
                "en": "Own capacity value (Wh)",
                "de": "Eigener Kapazitätswert (Wh)"
              },
              "value": 0,
              "min": 0,
              "max": 200000,
              "hint": {
                "en": "Self-defined capacity value of the battery. Only used if the corresponding switch has been selected.",
                "de": "Selbst definierter Kapazitätswert der Batterie. Wird nur verwendet, wenn der entsprechende Schalter ausgewählt wurde."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Other",
            "de": "Sonstiges"
          },
          "children": [
            {
              "id": "debugMode",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Debug mode",
                "de": "Debug Modus"
              },
              "hint": {
                "en": "If activated, more information is written to the Homey log. Only activate the switch when prompted if you have reported a problem yourself.",
                "de": "Wenn aktiviert, werden mehr Informationen in das Log von Homey geschrieben. Aktiviert den Schalter nur nach Aufforderung, wenn ihr selbst ein Problem gemeldet habt."
              }
            }
          ]
        }
      ]
    },
    {
      "name": {
        "en": "HPS - Statistics",
        "de": "HKW - Statistiken"
      },
      "class": "sensor",
      "capabilities": [
        "date_range",
        "measure_pv_summary",
        "measure_house_consumption_summary",
        "measure_grid_in",
        "measure_grid_out",
        "measure_battery_in",
        "measure_battery_out",
        "measure_autarky",
        "measure_self_consumption"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/summary/assets/images/small.png",
        "large": "/drivers/summary/assets/images/large.png",
        "xlarge": "/drivers/summary/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "connect",
          "navigation": {
            "next": "list_my_devices"
          }
        },
        {
          "id": "list_my_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices",
            "prev": "connect"
          },
          "options": {
            "singular": true
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "id": "summary"
    },
    {
      "name": {
        "en": "Wallbox",
        "de": "Wallbox"
      },
      "class": "other",
      "capabilities": [
        "measure_wallbox_consumption",
        "measure_wallbox_solarshare"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/wallbox/assets/images/small.png",
        "large": "/drivers/wallbox/assets/images/large.png",
        "xlarge": "/drivers/wallbox/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_my_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          },
          "options": {
            "singular": true
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "id": "wallbox"
    }
  ],
  "flow": {
    "triggers": [
      {
        "id": "firmware_has_changed",
        "title": {
          "de": "Firmware wurde aktualisiert",
          "en": "Firmware has been updated"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald eine neue Firmwareversion auf dem Hauskraftwerk installiert wurde",
          "en": "Is triggered as soon as a new firmware version has been installed on the home power station"
        },
        "tokens": [
          {
            "name": "old",
            "type": "string",
            "title": {
              "de": "Alte Firmware",
              "en": "Old firmware"
            }
          },
          {
            "name": "new",
            "type": "string",
            "title": {
              "de": "Neue Firmware",
              "en": "New firmware"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "max_charging_limit_has_changed",
        "title": {
          "de": "Maximale Ladeleistung wurde geändert",
          "en": "Maximum charging power has been changed"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald sich die maximal mögliche Ladeleistung geändert hat",
          "en": "Is triggered as soon as the maximum possible charging power has changed"
        },
        "tokens": [
          {
            "name": "old",
            "type": "number",
            "title": {
              "de": "Alte max. Ladeleistung (W)",
              "en": "Old max. charging power (W)"
            }
          },
          {
            "name": "new",
            "type": "number",
            "title": {
              "de": "Neue max. Ladeleistung (W)",
              "en": "New max. charging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "max_discharging_limit_has_changed",
        "title": {
          "de": "Maximale Entladeleistung wurde geändert",
          "en": "Maximum discharging power has been changed"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald sich die maximal mögliche Entladeleistung geändert hat",
          "en": "Is triggered as soon as the maximum possible discharging power has changed"
        },
        "tokens": [
          {
            "name": "old",
            "type": "number",
            "title": {
              "de": "Alte max. Entladeleistung (W)",
              "en": "Old max. discharging power (W)"
            }
          },
          {
            "name": "new",
            "type": "number",
            "title": {
              "de": "Neue max. Entladeleistung (W)",
              "en": "New max. discharging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "manual_battery_charging_started",
        "title": {
          "de": "Manuelle Speicherladung gestartet",
          "en": "Manual battery charging started"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald eine manuelle Speicherladung begonnen wurde",
          "en": "Is triggered as soon as manual storage loading has been started"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "manual_battery_charging_stopped",
        "title": {
          "de": "Manuelle Speicherladung beendet oder gestoppt",
          "en": "Manual storage charging ended or stopped"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald eine manuelle Speicherladung beendet oder abgebrochen wurde",
          "en": "Triggered as soon as a manual storage loading is completed or canceled"
        },
        "tokens": [
          {
            "name": "loadedEnergy",
            "type": "number",
            "title": {
              "de": "geladene Energiemenge (Wh)",
              "en": "Charged amount of energy (Wh)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "island_mode_started",
        "title": {
          "de": "Inselbetrieb (Notstrom) begonnen",
          "en": "Island operation (emergency power) started"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald das Hauskraftwerk in den Inselbetrieb umgeschaltet hat. Dies geschieht im Rahmen der Notstromfunktion",
          "en": "Is triggered as soon as the home power station has switched to stand-alone operation. This is done as part of the emergency power function"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "island_mode_stopped",
        "title": {
          "de": "Inselbetrieb (Notstrom) beendet",
          "en": "Island operation (emergency power) beendet"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald das Hauskraftwerk in den normalen Betrieb zurückgeschaltet hat. Dies geschieht im Rahmen der Notstromfunktion",
          "en": "Is triggered as soon as the home power station has switched back to normal operation. This is done as part of the emergency power function"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "emergency_power_reserve_has_changed",
        "title": {
          "de": "Die Notstromreserve wurde geändert",
          "en": "The emergency power reserve has been changed"
        },
        "hint": {
          "de": "Wird ausgelöst, sobald sich die eingestellte Notstromreserve geändert hat",
          "en": "Is triggered as soon as the set emergency power reserve has changed"
        },
        "tokens": [
          {
            "name": "old",
            "type": "number",
            "title": {
              "de": "Alte Notstromreserve in Wh",
              "en": "Old emergency power reserve in Wh"
            }
          },
          {
            "name": "new",
            "type": "number",
            "title": {
              "de": "Neue Notstromreserve in Wh",
              "en": "New emergency power reserve in Wh"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "is_max_charging_limit_greater_than",
        "title": {
          "de": "Die max. Ladeleistung ist !{{größer|kleiner}} als",
          "en": "The max. charging power is !{{greater|less}} than"
        },
        "titleFormatted": {
          "de": "Die max. Ladeleistung ist !{{größer|kleiner}} als [[limit]] [[unit]]",
          "en": "The max. charging power is !{{greater|less}} than [[limit]] [[unit]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "limit",
            "title": {
              "de": "Ladelimit",
              "en": "Charging limit"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": true,
            "values": [
              {
                "id": "w",
                "label": {
                  "de": "Watt",
                  "en": "Watt"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "is_max_discharging_limit_greater_than",
        "title": {
          "de": "Die max. Entladeleistung ist !{{größer|kleiner}} als",
          "en": "The max. discharging power is !{{greater|less}} than"
        },
        "titleFormatted": {
          "de": "Die max. Entladeleistung ist !{{größer|kleiner}} als [[limit]] [[unit]]",
          "en": "The max. discharging power is !{{greater|less}} than [[limit]] [[unit]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "limit",
            "title": {
              "de": "Entladelimit",
              "en": "Discharging limit"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": true,
            "values": [
              {
                "id": "w",
                "label": {
                  "de": "Watt",
                  "en": "Watt"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "is_max_charging_limit_active",
        "title": {
          "de": "Die maximale Ladeleistung ist aktuell !{{limitiert|nicht limitiert}}",
          "en": "The maximum charging power is currently !{{limited|not limited}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "is_max_discharging_limit_active",
        "title": {
          "de": "Die maximale Entladeleistung ist aktuell !{{limitiert|nicht limitiert}}",
          "en": "The maximum discharging power is currently !{{limited|not limited}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "is_any_power_limit_active",
        "title": {
          "de": "Die maximale Ladeleistung und/oder maximale Entladeleistung ist aktuell !{{limitiert|nicht limitiert}}",
          "en": "The maximum charging power and/or the maximum discharging power is currently !{{limited|not limited}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "is_manual_charge_active",
        "title": {
          "de": "Eine manuelle Speicherladung ist !{{aktiv|nicht aktiv}}",
          "en": "Manual battery charging is !{{active|not active}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "is_emergency_power_reserve_greater_than",
        "title": {
          "de": "Die eingestellte Notstromreserve ist !{{größer|kleiner}} als",
          "en": "The set emergency power reserve is !{{larger|smaller}} than"
        },
        "titleFormatted": {
          "de": "Die eingestellte Notstromreserve ist !{{größer|kleiner}} als [[reserve]] [[unit]]",
          "en": "The set emergency power reserve is !{{larger|smaller}} than [[reserve]] [[unit]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "reserve",
            "title": {
              "de": "Reserve",
              "en": "Reserve"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": true,
            "values": [
              {
                "id": "wh",
                "label": {
                  "de": "Wh",
                  "en": "Wh"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "is_island_mode_active",
        "title": {
          "de": "Der Inselbetrieb ist !{{aktiv|nicht aktiv}}",
          "en": "Island mode is !{{active|not active}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "is_island_mode_possible",
        "title": {
          "de": "Der Inselbetrieb ist !{{möglich|nicht möglich}}",
          "en": "Island mode is !{{possible|not possible}}"
        },
        "hint": {
          "de": "Prüft ob ein Inselbetrieb möglich ist. Die Karte liefert nur 'Ja' wenn folgende Bedingeungen erfüllt sind: Hauskraftwerk ist nicht im Inselbetrieb. Hauskraftwerk meldet, dass die Notstromfunktion zur Verfügung steht und das Hauskraftwerk muss melden, dass ein Umschalten möglich ist",
          "en": "Checks whether island operation is possible. The card only returns 'Yes' if the following conditions are met: The home power station is not in stand-alone mode. The home power station reports that the emergency power function is available and the home power station must report that switching is possible"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "configure_max_charging_power",
        "title": {
          "de": "Setze die max. Ladeleistung",
          "en": "Set the max. charging power"
        },
        "titleFormatted": {
          "de": "Setzt das maximale Ladelimit des Hauskraftwerks auf [[limit]] [[unit]]",
          "en": "Sets the maximum charge limit of the home power station to [[limit]] [[unit]]"
        },
        "hint": {
          "de": "Setzt das maximale Ladelimit des Hauskraftwerks und aktiviert die Einstellungen. Kann zum Beispiel die Batterie laut Hauskraftwerk mit 7000W geladen werden, der Wert wird auf hier 5000W begrenzt und es liegt mehr als 5000W Überschuss PV Strom an, wird die Batterie entsprechend langsamer geladen. Die Werte müssen innerhalb der zulässigen Werte des Hauskraftwerks liegen. Tuen sie dies nicht, schlägt die Karte fehl.",
          "en": "Sets the maximum charging limit of the home power station and activates the settings. If, for example, the battery can be charged with 7000W according to the home power station, the value is limited to 5000W here and there is more than 5000W of excess PV power, the battery is charged correspondingly more slowly. The values must be within the permissible values of the home power station. If they are not, the card will fail."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "limit",
            "title": {
              "de": "Ladelimit",
              "en": "Charging limit"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": false,
            "values": [
              {
                "id": "w",
                "label": {
                  "de": "Watt",
                  "en": "Watt"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ],
        "tokens": [
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Max. Ladeleistung (W)",
              "en": "Max. charging power (W)"
            }
          }
        ]
      },
      {
        "id": "remove_max_charging_power",
        "title": {
          "de": "Entferne die max. Ladeleistungsbeschränkung",
          "en": "Remove the max. charging power restriction"
        },
        "titleFormatted": {
          "de": "Entferne das maximale Ladelimit des Hauskraftwerks",
          "en": "Remove the maximum charging limit of the home power station"
        },
        "hint": {
          "de": "Entfernt ein evtl. vorhandenes Ladelimit aus dem Hauskraftwerk.",
          "en": "Removes any existing charging limit from the home power station."
        },
        "tokens": [
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Max. Ladeleistung (W)",
              "en": "Max. charging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "configure_max_discharging_power",
        "title": {
          "de": "Setze die max. Entladeleistung",
          "en": "Set the max. discharging power"
        },
        "titleFormatted": {
          "de": "Setzt das maximale Entladelimit des Hauskraftwerks auf [[limit]] [[unit]]",
          "en": "Sets the maximum discharge limit of the home power station to [[limit]] [[unit]]"
        },
        "hint": {
          "de": "Setzt das maximale Entladelimit des Hauskraftwerks und aktiviert die Einstellungen. Kann zum Beispiel die Batterie laut Hauskraftwerk mit 7000W entladen werden, der Wert wird auf hier 5000W begrenzt und der Hausverbrauche liegt bei mehr als 5000W, wird die Batterie trotzdem nur mit max. 5000W entladen. Der Unterschied wird in der Regel durch aus dem Netz bzw. dem PV Überschuss ausgeglichen. Die Werte müssen innerhalb der zulässigen Werte des Hauskraftwerks liegen. Tuen sie dies nicht, schlägt die Karte fehl.",
          "en": "Sets the maximum discharge limit of the home power station and activates the settings. If, for example, the battery can be discharged with 7000W according to the home power station, the value is limited to 5000W here and the home consumption is more than 5000W, the battery is still only discharged with a maximum of 5000W. The difference is usually compensated by the grid or the PV surplus. The values must be within the permissible values of the home power station. If they do not, the card will fail."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "limit",
            "title": {
              "de": "Entladelimit",
              "en": "Discharging limit"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": false,
            "values": [
              {
                "id": "w",
                "label": {
                  "de": "Watt",
                  "en": "Watt"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ],
        "tokens": [
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Max. Entladeleistung (W)",
              "en": "Max. discharging power (W)"
            }
          }
        ]
      },
      {
        "id": "remove_max_discharging_power",
        "title": {
          "de": "Entferne die max. Entladeleistungsbeschränkung",
          "en": "Remove the max. discharging power restriction"
        },
        "titleFormatted": {
          "de": "Entferne das maximale Entladelimit des Hauskraftwerks",
          "en": "Remove the maximum discharging limit of the home power station"
        },
        "hint": {
          "de": "Entfernt ein evtl. vorhandenes Entladelimit aus dem Hauskraftwerk.",
          "en": "Removes any existing discharging limit from the home power station."
        },
        "tokens": [
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Max. Entladeleistung (W)",
              "en": "Max. discharging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "remove_all_power_limits",
        "title": {
          "de": "Entferne alle Lade- und Entladelimits",
          "en": "Remove all charging and discharging limits"
        },
        "hint": {
          "de": "Entferne alle Lade- und Entladelimits und setzt diese auf die Defaultwerte zurück",
          "en": "Remove all charging and discharging limits and reset them to the default values"
        },
        "tokens": [
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Max. Ladeleistung (W)",
              "en": "Max. charging power (W)"
            }
          },
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Max. Entladeleistung (W)",
              "en": "Max. discharging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "provide_charging_configuration",
        "title": {
          "de": "Stelle die aktuelle Ladekonfiguration bereit",
          "en": "Provide the current charging configuration"
        },
        "hint": {
          "de": "Liest die aktuell am Hauskraftwerk eingestellte Ladekonfiguration aus und stellt die Werte als Tokens im Flow zur Verfügung",
          "en": "Reads out the charging configuration currently set on the home power station and makes the values available as tokens in the flow"
        },
        "tokens": [
          {
            "name": "max possible charging limit",
            "type": "number",
            "title": {
              "de": "Max. mögliche Ladeleistung (W)",
              "en": "Max. possible charging power (W)"
            }
          },
          {
            "name": "max possible discharging limit",
            "type": "number",
            "title": {
              "de": "Max. mögliche Entladeleistung (W)",
              "en": "Max. possible discharging power (W)"
            }
          },
          {
            "name": "min possible charging limit",
            "type": "number",
            "title": {
              "de": "Min. mögliche Ladeleistung (W)",
              "en": "Min. possible charging power (W)"
            }
          },
          {
            "name": "min possible discharging limit",
            "type": "number",
            "title": {
              "de": "Min. mögliche Entladeleistung (W)",
              "en": "Min. possible discharging power (W)"
            }
          },
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Ladeleistung (W)",
              "en": "Current max. charging power (W)"
            }
          },
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Entladeleistung (W)",
              "en": "Current max. discharging power (W)"
            }
          },
          {
            "name": "limits active",
            "type": "boolean",
            "title": {
              "de": "Limit konfiguration aktiviert",
              "en": "Limit configuration activated"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "activate_configured_power_limits",
        "title": {
          "de": "Aktiviere die aktuell am Hauskraftwerk eingestellten Lade-/Entladelimits",
          "en": "Activate the charge/discharge limits currently set on the home power station"
        },
        "hint": {
          "de": "Aktiviert die Lade- und Entladelimit Konfiguration, die im Hauskraftwerk gespeichert ist",
          "en": "Activates the charge and discharge limit configuration stored in the home power station"
        },
        "tokens": [
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Ladeleistung (W)",
              "en": "Current max. charging power (W)"
            }
          },
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Entladeleistung (W)",
              "en": "Current max. discharging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "deactivate_configured_power_limits",
        "title": {
          "de": "Deaktiviere die aktuell am Hauskraftwerk eingestellten Lade-/Entladelimits",
          "en": "Deactivate the charge/discharge limits currently set on the home power station"
        },
        "hint": {
          "de": "Deaktiviert die Lade- und Entladelimit Konfiguration, die im Hauskraftwerk gespeichert ist. Die Werte bleiben erhalten. Nur die Funktion selbst wird deaktiviert",
          "en": "Deactivates the charging and discharging limit configuration stored in the home power station. The values are retained. Only the function itself is deactivated"
        },
        "tokens": [
          {
            "name": "max charging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Ladeleistung (W)",
              "en": "Current max. charging power (W)"
            }
          },
          {
            "name": "max discharging limit",
            "type": "number",
            "title": {
              "de": "Aktuelle max. Entladeleistung (W)",
              "en": "Current max. discharging power (W)"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "start_manual_battery_charging_amount",
        "title": {
          "de": "Starte eine manuelle Speicherladung",
          "en": "Start a manual battery charge"
        },
        "titleFormatted": {
          "de": "Lade [[amount]] Wh zusätzlich in die Batterie",
          "en": "Charge [[amount]] Wh additionally into the battery"
        },
        "hint": {
          "de": "Es wird ein manueller Ladevorgang gestartet. Es wird die angegebene Energiemenge in Wh zusätzlich zum jetzigen Ladestand geladen (Bis max 100%). Achtung: Bei den meisten Hauskraftwerken kann eine manuelle Speicherladung nur einmal am Tag ausgelöst werden",
          "en": "A manual charging process is started. The specified amount of energy in Wh is charged in addition to the current charge level (up to max. 100%). Attention: With most home power stations, manual storage charging can only be triggered once a day"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "amount",
            "title": {
              "de": "Energiemenge",
              "en": "Amount of energy"
            },
            "required": true,
            "min": 200,
            "step": 1
          }
        ]
      },
      {
        "id": "start_manual_battery_charging_percentage",
        "title": {
          "de": "Lade die Batterie auf",
          "en": "Charge the battery"
        },
        "titleFormatted": {
          "de": "Lade die Batterie auf annährend [[amount]]% auf",
          "en": "Charge the battery to approximately [[amount]]%"
        },
        "hint": {
          "de": "Es wird ein manueller Ladevorgang gestartet. Die Batterie wird ca. auf den angegebenen Prozentwert geladen. Achtung: Bei den meisten Hauskraftwerken kann eine manuelle Speicherladung nur einmal am Tag ausgelöst werden",
          "en": "A manual charging process is started. The battery is charged to approximately the specified percentage value. Attention: With most home power stations, manual storage charging can only be triggered once a day"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "amount",
            "title": {
              "de": "Zielladestand",
              "en": "Target charge level"
            },
            "required": true,
            "min": 0,
            "max": 100,
            "step": 1
          }
        ]
      },
      {
        "id": "stop_manual_battery_charging",
        "title": {
          "de": "Stoppt einen manuellen Ladevorgang",
          "en": "Stops a manual charging process"
        },
        "hint": {
          "de": "Wenn ein manueller Ladevorgang läuft, wird er beim Ausführen dieser Karte gestoppt",
          "en": "If a manual charging process is running, it is stopped when this card is executed"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      },
      {
        "id": "configure_emergency_reserve",
        "title": {
          "de": "Setzt die Notstromreserve",
          "en": "Sets the emergency power reserve"
        },
        "titleFormatted": {
          "de": "Setze die Notstromreserve auf [[amount]][[unit]]",
          "en": "Set the emergency power reserve to [[amount]][[unit]]"
        },
        "hint": {
          "de": "Setzt die Notstromreserve des Hauskraftwerks",
          "en": "Sets the emergency power reserve of the home power station"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          },
          {
            "type": "number",
            "name": "amount",
            "title": {
              "de": "Reserve",
              "en": "Reserve"
            },
            "required": true,
            "min": 0,
            "step": 1
          },
          {
            "type": "dropdown",
            "name": "unit",
            "title": {
              "en": "Unit",
              "de": "Einheit"
            },
            "required": true,
            "values": [
              {
                "id": "wh",
                "label": {
                  "de": "Wh",
                  "en": "Wh"
                }
              },
              {
                "id": "percentage",
                "label": {
                  "de": "%",
                  "en": "%"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "remove_emergency_reserve",
        "title": {
          "de": "Entfernt die Notstromreserve",
          "en": "Removes the emergency power reserve"
        },
        "hint": {
          "de": "Entfernt die Notrstromreserve des Hauskraftwerks. Nach dem Ausführen der Karte steht die gesamte Batteriekapazität zur normalen Energieversorgung zur Verfügung",
          "en": "Removes the emergency power reserve of the home power station. After executing the card, the entire battery capacity is available for normal energy supply"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=home-power-station"
          }
        ]
      }
    ]
  },
  "capabilities": {
    "charge_time": {
      "type": "string",
      "title": {
        "en": "Rem. (dis)charging time",
        "de": "Rest(ent)ladezeit"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/clock.svg",
      "insights": false
    },
    "date_range": {
      "type": "string",
      "title": {
        "en": "Range",
        "de": "Bereich"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/date-range.svg",
      "insights": false
    },
    "device_name": {
      "type": "string",
      "title": {
        "en": "Name",
        "de": "Name"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/badge.svg",
      "insights": false
    },
    "firmware_version": {
      "type": "string",
      "title": {
        "en": "Firmware",
        "de": "Firmware"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/info.svg",
      "insights": false
    },
    "measure_autarky": {
      "type": "number",
      "title": {
        "en": "Self-sufficient",
        "de": "Autarkie"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "%",
        "de": "%"
      },
      "icon": "/assets/images/percentage.svg",
      "insights": true,
      "decimals": 0,
      "min": 0,
      "max": 100
    },
    "measure_battery_delivery": {
      "type": "number",
      "title": {
        "en": "Battery power",
        "de": "Batterie Leistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/battery.svg",
      "insights": true,
      "decimals": 2
    },
    "measure_battery_in": {
      "type": "number",
      "title": {
        "en": "Battery charged",
        "de": "Batterie geladen"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/battery-load.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_battery_out": {
      "type": "number",
      "title": {
        "en": "Battery discharged",
        "de": "Batterie entladen"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/battery-unload.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_capacity": {
      "type": "number",
      "title": {
        "en": "Capacity",
        "de": "Kapazität"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/capacity.svg",
      "insights": false,
      "decimals": 1
    },
    "measure_dcbcount": {
      "type": "number",
      "title": {
        "en": "Number of modules",
        "de": "Modulanzahl"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/counter.svg",
      "insights": false,
      "decimals": 0
    },
    "measure_emergency_power_reserve": {
      "type": "number",
      "title": {
        "en": "Emergency power reserve",
        "de": "Notstromreserve"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "Wh",
        "de": "Wh"
      },
      "icon": "/assets/images/emergency_power_reserve.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_grid_delivery": {
      "type": "number",
      "title": {
        "en": "Grid power",
        "de": "Netz Leistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/grid.svg",
      "insights": true,
      "decimals": 2
    },
    "measure_grid_in": {
      "type": "number",
      "title": {
        "en": "Feed-in",
        "de": "Einspeisung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/grid-feedin.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_grid_out": {
      "type": "number",
      "title": {
        "en": "Power purchase",
        "de": "Bezug"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/grid-receive.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_house_consumption": {
      "type": "number",
      "title": {
        "en": "House consumption",
        "de": "Hausverbrauch"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/home.svg",
      "insights": true,
      "decimals": 2
    },
    "measure_house_consumption_summary": {
      "type": "number",
      "title": {
        "en": "House consumption",
        "de": "Hausverbrauch"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/home.svg",
      "insights": true,
      "decimals": 1
    },
    "measure_max_charging_power": {
      "type": "number",
      "title": {
        "en": "Max Charging power",
        "de": "Max Ladeleistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/battery-load.svg",
      "insights": true,
      "decimals": 0
    },
    "measure_max_discharging_power": {
      "type": "number",
      "title": {
        "en": "Max Discharging power",
        "de": "Max Entladeleistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/battery-unload.svg",
      "insights": true,
      "decimals": 0
    },
    "measure_pv_delivery": {
      "type": "number",
      "title": {
        "en": "PV power",
        "de": "PV Leistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/solar.svg",
      "insights": true,
      "decimals": 2
    },
    "measure_pv_summary": {
      "type": "number",
      "title": {
        "en": "PV",
        "de": "PV"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "kWh",
        "de": "kWh"
      },
      "icon": "/assets/images/solar.svg",
      "insights": false,
      "decimals": 1
    },
    "measure_self_consumption": {
      "type": "number",
      "title": {
        "en": "Self consumption",
        "de": "Eigenverbrauch"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "%",
        "de": "%"
      },
      "icon": "/assets/images/percentage.svg",
      "insights": true,
      "decimals": 0,
      "min": 0,
      "max": 100
    },
    "measure_temperature_max": {
      "type": "number",
      "title": {
        "en": "Max cell temperature",
        "de": "Max Zelltemperatur"
      },
      "units": {
        "de": "°C",
        "en": "°C"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/temp_max.svg",
      "insights": true,
      "decimals": 0
    },
    "measure_temperature_min": {
      "type": "number",
      "title": {
        "en": "Min cell temperature",
        "de": "Min Zelltemperatur"
      },
      "units": {
        "de": "°C",
        "en": "°C"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/images/temp_min.svg",
      "insights": true,
      "decimals": 0
    },
    "measure_wallbox_consumption": {
      "type": "number",
      "title": {
        "en": "Power",
        "de": "Leistung"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/ev-station.svg",
      "insights": true,
      "decimals": 0
    },
    "measure_wallbox_solarshare": {
      "type": "number",
      "title": {
        "en": "Solar share",
        "de": "Solaranteil"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "W",
        "de": "W"
      },
      "icon": "/assets/images/ev-station-solar.svg",
      "insights": true,
      "decimals": 0
    }
  }
}